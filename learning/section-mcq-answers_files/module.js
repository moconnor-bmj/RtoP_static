
$.fn.isElementExisted=function(data){var isExisted=false;if(data!=undefined||data!==null||data!=='')
{isExisted=true;}
return isExisted;};var BCLS=(function(){var player,APIModules,captionsEvent,mediaEvent,playerType,videoPlayer,captionsModule,cuePointsModule,videoLength,cuePointDataObj={},timeRanges=[],i=0,j=0,max=0,obj,experienceId,chapterlistTemplate="<h5></h5>{{#cuePointData}}<div class=\"chapterlist-item\" data-time=\"{{time}}\"><h6>{{name}}</h6></div>{{/cuePointData}}",template,data,results,t,$item,$this;getCuePoints=function(videoID,locale){cuePointsModule.getCuePoints(videoID,function(cuePointData){var divWithVideoId="chapterlist_player_"+experienceId;var chapterListId="BCLS_chapterlist_"+experienceId;var isProceed=true;if(cuePointData===undefined||cuePointData===null||cuePointData==='')
{var refElem=document.getElementById(divWithVideoId);var objectElem=refElem.getElementsByTagName("object");objectElem[0].setAttribute("width","640px");isProceed=false;}
if(isProceed){cuePointDataObj={};cuePointData.sort(function(a,b){return a.time-b.time;});cuePointData.splice(0,1);cuePointData.splice((cuePointData.length-1),1);timeRanges=[];var newCuePointData=cuePointData;for(var i=0;i<cuePointData.length;i++){var obj={};var j=i+1;var localeArray=JSON.parse(cuePointData[i].name);var localeDesc=localeArray[locale];obj.chapter=localeDesc;obj.start=cuePointData[i].time;newCuePointData[i].name=localeDesc;if(i!==(cuePointData.length-1)){obj.end=cuePointData[j].time;}else{obj.end=videoLength;}
timeRanges.push(obj);}
cuePointDataObj.cuePointData=newCuePointData;videoPlayer.play();}});};buildchapterlist=function(){template=Handlebars.compile(chapterlistTemplate);data=cuePointDataObj;results=template(data);var selectedDiv="#BCLS_chapterlist_"+experienceId;$(selectedDiv).html(results);$(".chapter-list h5").append(document.createTextNode(jQuery.i18n.prop("brightcove.chapters.title")));$(".chapterlist-item").on("click",function(evt){$this=$(this);var selectedExperienceId=$this.parents("div").attr("id");var expId=selectedExperienceId.split("_");var maxLength=expId.length;highlightItem($this);playChapter($this.attr("data-time"),expId[maxLength-1]);});if(data!==undefined||data!==null||data!=='')
{var divWithVideoId="chapterlist_player_"+experienceId;var refElem=document.getElementById(divWithVideoId);var objectElem=refElem.getElementsByTagName("object");var videoWidth="525px";if(navigator.userAgent.match(/msie [6]/i))
{videoWidth="500px";}
objectElem[0].setAttribute("width",videoWidth);}};highlightItem=function($item){$item.siblings().removeClass("chapterlist-item-selected");$item.addClass("chapterlist-item-selected");};playChapter=function(time,experienceID){var currPlayer=brightcove.api.getExperience(experienceID);var currvideoPlayer=currPlayer.getModule(APIModules.VIDEO_PLAYER);currvideoPlayer.getIsPlaying(function(isPlaying){if(isPlaying==true){currvideoPlayer.seek(time);}
else{currvideoPlayer.play();playChapter(time);}});};constructCuePoint=function(mediaData)
{if(mediaData!==undefined||mediaData!==null||mediaData!=='null')
{var currentLocale=getCurrentLocale('input#locale');var videoId=mediaData.id;getCuePoints(videoId,currentLocale);videoLength=mediaData.length/1000;}};getCurrentLocale=function(elementName)
{var currentLocale="en_GB";if(currentLocale!==undefined|currentLocale!==null||currentLocale!=='')
{currentLocale=$(elementName).val();if(currentLocale.indexOf("-")>-1)
{currentLocale.replace("-","_");}}
return currentLocale;}
return{onTemplateLoad:function(experienceID){$('#BCLS_chapterlist_'+experienceID).empty();player=brightcove.api.getExperience(experienceID);experienceId=experienceID;APIModules=brightcove.api.modules.APIModules;captionsEvent=brightcove.api.events.CaptionsEvent;mediaEvent=brightcove.api.events.MediaEvent;playerType=player.type;if(playerType=="html"){$("#BCLS_chapterTicks").addClass("htmlPlayer");}else{$("#BCLS_chapterTicks").addClass("flashPlayer");}},onTemplateReady:function(evt){videoPlayer=player.getModule(APIModules.VIDEO_PLAYER);cuePointsModule=player.getModule(APIModules.CUE_POINTS);captionsModule=player.getModule(APIModules.CAPTIONS);var currentLocale=getCurrentLocale('input#locale');var currentLocaleName=$('input#localeName').val();if(currentLocale!='en_GB'){captionsModule.setCaptionsEnabled(true);captionsModule.setLanguage(currentLocaleName);}else{captionsModule.setCaptionsEnabled(false);captionsModule.setLanguage(currentLocaleName);}
videoPlayer.getCurrentVideo(function(dto){if(typeof dto!==typeof undefined||dto!=undefined||dto!='undefined'||dto!==null||dto!=='null')
{constructCuePoint(dto);}});videoPlayer.addEventListener(mediaEvent.BEGIN,BCLS.onMediaBegin);videoPlayer.addEventListener(mediaEvent.PLAY,BCLS.onMediaBegin);videoPlayer.addEventListener(mediaEvent.PROGRESS,BCLS.onMediaProgress);},onMediaBegin:function(evt){if(evt.type==="mediaBegin")
{buildchapterlist();}},onMediaProgress:function(evt){for(i=0,max=timeRanges.length;i<max;i++){if(evt.position>timeRanges[i].start&&evt.position<timeRanges[i].end){highlightItem($(".chapterlist-item").eq(i));break;}}}}}());(function(){function g(o){console.log("$f.fireEvent",[].slice.call(o))}function k(q){if(!q||typeof q!="object"){return q}var o=new q.constructor();for(var p in q){if(q.hasOwnProperty(p)){o[p]=k(q[p])}}return o}function m(t,q){if(!t){return}var o,p=0,r=t.length;if(r===undefined){for(o in t){if(q.call(t[o],o,t[o])===false){break}}}else{for(var s=t[0];p<r&&q.call(s,p,s)!==false;s=t[++p]){}}return t}function c(o){return document.getElementById(o)}function i(q,p,o){if(typeof p!="object"){return q}if(q&&p){m(p,function(r,s){if(!o||typeof s!="function"){q[r]=s}})}return q}function n(s){var q=s.indexOf(".");if(q!=-1){var p=s.substring(0,q)||"*";var o=s.substring(q+1,s.length);var r=[];m(document.getElementsByTagName(p),function(){if(this.className&&this.className.indexOf(o)!=-1){r.push(this)}});return r}}function f(o){o=o||window.event;if(o.preventDefault){o.stopPropagation();o.preventDefault()}else{o.returnValue=false;o.cancelBubble=true}return false}function j(q,o,p){q[o]=q[o]||[];q[o].push(p)}function e(){return"_"+(""+Math.random()).substring(2,10)}var h=function(t,r,s){var q=this;var p={};var u={};q.index=r;if(typeof t=="string"){t={url:t}}i(this,t,true);m(("Begin*,Start,Pause*,Resume*,Seek*,Stop*,Finish*,LastSecond,Update,BufferFull,BufferEmpty,BufferStop").split(","),function(){var v="on"+this;if(v.indexOf("*")!=-1){v=v.substring(0,v.length-1);var w="onBefore"+v.substring(2);q[w]=function(x){j(u,w,x);return q}}q[v]=function(x){j(u,v,x);return q};if(r==-1){if(q[w]){s[w]=q[w]}if(q[v]){s[v]=q[v]}}});i(this,{onCuepoint:function(x,w){if(arguments.length==1){p.embedded=[null,x];return q}if(typeof x=="number"){x=[x]}var v=e();p[v]=[x,w];if(s.isLoaded()){s._api().fp_addCuepoints(x,r,v)}return q},update:function(w){i(q,w);if(s.isLoaded()){s._api().fp_updateClip(w,r)}var v=s.getConfig();var x=(r==-1)?v.clip:v.playlist[r];i(x,w,true)},_fireEvent:function(v,y,w,A){if(v=="onLoad"){m(p,function(B,C){if(C[0]){s._api().fp_addCuepoints(C[0],r,B)}});return false}A=A||q;if(v=="onCuepoint"){var z=p[y];if(z){return z[1].call(s,A,w)}}if(v=="onStart"||v=="onUpdate"){i(A,y);if(!A.duration){A.duration=y.metaData.duration}else{A.fullDuration=y.metaData.duration}}var x=true;m(u[v],function(){x=this.call(s,A,y,w)});return x}});if(t.onCuepoint){var o=t.onCuepoint;q.onCuepoint.apply(q,typeof o=="function"?[o]:o);delete t.onCuepoint}m(t,function(v,w){if(typeof w=="function"){j(u,v,w);delete t[v]}});if(r==-1){s.onCuepoint=this.onCuepoint}};var l=function(p,r,q,t){var s={};var o=this;var u=false;if(t){i(s,t)}m(r,function(v,w){if(typeof w=="function"){s[v]=w;delete r[v]}});i(this,{animate:function(y,z,x){if(!y){return o}if(typeof z=="function"){x=z;z=500}if(typeof y=="string"){var w=y;y={};y[w]=z;z=500}if(x){var v=e();s[v]=x}if(z===undefined){z=500}r=q._api().fp_animate(p,y,z,v);return o},css:function(w,x){if(x!==undefined){var v={};v[w]=x;w=v}r=q._api().fp_css(p,w);i(o,r);return o},show:function(){this.display="block";q._api().fp_showPlugin(p);return o},hide:function(){this.display="none";q._api().fp_hidePlugin(p);return o},toggle:function(){this.display=q._api().fp_togglePlugin(p);return o},fadeTo:function(y,x,w){if(typeof x=="function"){w=x;x=500}if(w){var v=e();s[v]=w}this.display=q._api().fp_fadeTo(p,y,x,v);this.opacity=y;return o},fadeIn:function(w,v){return o.fadeTo(1,w,v)},fadeOut:function(w,v){return o.fadeTo(0,w,v)},getName:function(){return p},getPlayer:function(){return q},_fireEvent:function(w,v,x){if(w=="onUpdate"){var y=q._api().fp_getPlugin(p);if(!y){return}i(o,y);delete o.methods;if(!u){m(y.methods,function(){var A=""+this;o[A]=function(){var B=[].slice.call(arguments);var C=q._api().fp_invoke(p,A,B);return C=="undefined"?o:C}});u=true}}var z=s[w];if(z){z.apply(o,v);if(w.substring(0,1)=="_"){delete s[w]}}}})};function b(o,t,z){var E=this,y=null,x,u,p=[],s={},B={},r,v,w,D,A,q;i(E,{id:function(){return r},isLoaded:function(){return(y!==null)},getParent:function(){return o},hide:function(F){if(F){o.style.height="0px"}if(y){y.style.height="0px"}return E},show:function(){o.style.height=q+"px";if(y){y.style.height=A+"px"}return E},isHidden:function(){return y&&parseInt(y.style.height,10)===0},load:function(F){if(!y&&E._fireEvent("onBeforeLoad")!==false){m(a,function(){this.unload()});x=o.innerHTML;if(x&&!flashembed.isSupported([9,0])){wrappper.innerHTML=""}flashembed(o,t,{config:z});if(F){F.cached=true;j(B,"onLoad",F)}}return E},unload:function(){try{if(!y||y.fp_isFullscreen()){return E}}catch(F){return E}if(x.replace(/\s/g,"")!==""){if(E._fireEvent("onBeforeUnload")===false){return false}y.fp_close();y=null;o.innerHTML=x;E._fireEvent("onUnload")}return E},getClip:function(F){if(F===undefined){F=D}return p[F]},getCommonClip:function(){return u},getPlaylist:function(){return p},getPlugin:function(F){var H=s[F];if(!H&&E.isLoaded()){var G=E._api().fp_getPlugin(F);if(G){H=new l(F,G,E);s[F]=H}}return H},getScreen:function(){return E.getPlugin("screen")},getControls:function(){return E.getPlugin("controls")},getConfig:function(F){return F?k(z):z},getFlashParams:function(){return t},loadPlugin:function(I,H,K,J){if(typeof K=="function"){J=K;K={}}var G=J?e():"_";E._api().fp_loadPlugin(I,H,K,G);var F={};F[G]=J;var L=new l(I,null,E,F);s[I]=L;return L},getState:function(){return y?y.fp_getState():-1},play:function(F){function G(){if(F!==undefined){E._api().fp_play(F)}else{E._api().fp_play()}}if(y){G()}else{E.load(function(){G()})}return E},getVersion:function(){var G="flowplayer.js 3.1.0";if(y){var F=y.fp_getVersion();F.push(G);return F}return G},_api:function(){if(!y){throw"Flowplayer "+E.id()+" not loaded when calling an API method"}return y},setClip:function(F){E.setPlaylist([F]);return E},getIndex:function(){return w}});m(("Click*,Load*,Unload*,Keypress*,Volume*,Mute*,Unmute*,PlaylistReplace,Fullscreen*,FullscreenExit,Error").split(","),function(){var F="on"+this;if(F.indexOf("*")!=-1){F=F.substring(0,F.length-1);var G="onBefore"+F.substring(2);E[G]=function(H){j(B,G,H);return E}}E[F]=function(H){j(B,F,H);return E}});m(("pause,resume,mute,unmute,stop,toggle,seek,getStatus,getVolume,setVolume,getTime,isPaused,isPlaying,startBuffering,stopBuffering,isFullscreen,reset,close,setPlaylist").split(","),function(){var F=this;E[F]=function(G){if(!y){return E}var H=(G===undefined)?y["fp_"+F]():y["fp_"+F](G);return H=="undefined"?E:H}});E._fireEvent=function(O){if(typeof O=="string"){O=[O]}var P=O[0];var L=O[1];var K=O[2];var J=O[3];if(z.debug){g(O)}if(!y&&P=="onLoad"&&L=="player"){y=y||c(v);A=y.clientHeight;m(p,function(){this._fireEvent("onLoad")});m(s,function(Q,R){R._fireEvent("onUpdate")});u._fireEvent("onLoad")}if(P=="onLoad"&&L!="player"){return}if(P=="onError"){if(typeof L=="string"||(typeof L=="number"&&typeof K=="number")){L=K;K=J}}if(P=="onContextMenu"){m(z.contextMenu[L],function(Q,R){R.call(E)});return}if(P=="onPluginEvent"){var F=L.name||L;var G=s[F];if(G){G._fireEvent("onUpdate",L);G._fireEvent(K,O.slice(3))}return}if(P=="onPlaylistReplace"){p=[];var M=0;m(L,function(){p.push(new h(this,M++,E))})}var N=true;if(typeof L=="number"&&L<p.length){D=L;var H=p[L];if(H){N=H._fireEvent(P,K,J)}if(!H||N!==false){N=u._fireEvent(P,K,J,H)}}var I=0;m(B[P],function(){N=this.call(E,L,K);if(this.cached){B[P].splice(I,1)}if(N===false){return false}I++});return N};function C(){if($f(o)){$f(o).getParent().innerHTML="";w=$f(o).getIndex();a[w]=E}else{a.push(E);w=a.length-1}q=parseInt(o.style.height,10)||o.clientHeight;if(typeof t=="string"){t={src:t}}r=o.id||"fp"+e();v=t.id||r+"_api";t.id=v;z.playerId=r;if(typeof z=="string"){z={clip:{url:z}}}if(typeof z.clip=="string"){z.clip={url:z.clip}}z.clip=z.clip||{};if(o.getAttribute("href",2)&&!z.clip.url){z.clip.url=o.getAttribute("href",2)}u=new h(z.clip,-1,E);z.playlist=z.playlist||[z.clip];var F=0;m(z.playlist,function(){var H=this;if(typeof H=="object"&&H.length){H={url:""+H}}m(z.clip,function(I,J){if(J!==undefined&&H[I]===undefined&&typeof J!="function"){H[I]=J}});z.playlist[F]=H;H=new h(H,F,E);p.push(H);F++});m(z,function(H,I){if(typeof I=="function"){j(B,H,I);delete z[H]}});m(z.plugins,function(H,I){if(I){s[H]=new l(H,I,E)}});if(!z.plugins||z.plugins.controls===undefined){s.controls=new l("controls",null,E)}s.canvas=new l("canvas",null,E);t.bgcolor=t.bgcolor||"#000000";t.version=t.version||[9,0];t.expressInstall="http://www.flowplayer.org/swf/expressinstall.swf";function G(H){if(!E.isLoaded()&&E._fireEvent("onBeforeClick")!==false){E.load()}return f(H)}x=o.innerHTML;if(x.replace(/\s/g,"")!==""){if(o.addEventListener){o.addEventListener("click",G,false)}else{if(o.attachEvent){o.attachEvent("onclick",G)}}}else{if(o.addEventListener){o.addEventListener("click",f,false)}E.load()}}if(typeof o=="string"){flashembed.domReady(function(){var F=c(o);if(!F){throw"Flowplayer cannot access element: "+o}else{o=F;C()}})}else{C()}}var a=[];function d(o){this.length=o.length;this.each=function(p){m(o,p)};this.size=function(){return o.length}}window.flowplayer=window.$f=function(){var p=null;var o=arguments[0];if(!arguments.length){m(a,function(){if(this.isLoaded()){p=this;return false}});return p||a[0]}if(arguments.length==1){if(typeof o=="number"){return a[o]}else{if(o=="*"){return new d(a)}m(a,function(){if(this.id()==o.id||this.id()==o||this.getParent()==o){p=this;return false}});return p}}if(arguments.length>1){var r=arguments[1];var q=(arguments.length==3)?arguments[2]:{};if(typeof o=="string"){if(o.indexOf(".")!=-1){var t=[];m(n(o),function(){t.push(new b(this,k(r),k(q)))});return new d(t)}else{var s=c(o);return new b(s!==null?s:o,r,q)}}else{if(o){return new b(o,r,q)}}}return null};i(window.$f,{fireEvent:function(){var o=[].slice.call(arguments);var q=$f(o[0]);return q?q._fireEvent(o.slice(1)):null},addPlugin:function(o,p){b.prototype[o]=p;return $f},each:m,extend:i});if(document.all){window.onbeforeunload=function(){$f("*").each(function(){if(this.isLoaded()){this.close()}})}}if(typeof jQuery=="function"){jQuery.prototype.flowplayer=function(q,p){if(!arguments.length||typeof arguments[0]=="number"){var o=[];this.each(function(){var r=$f(this);if(r){o.push(r)}});return arguments.length?o[arguments[0]]:new d(o)}return this.each(function(){$f(this,k(q),p?k(p):{})})}}})();(function(){var e=typeof jQuery=="function";function i(){if(c.done){return false}var k=document;if(k&&k.getElementsByTagName&&k.getElementById&&k.body){clearInterval(c.timer);c.timer=null;for(var j=0;j<c.ready.length;j++){c.ready[j].call()}c.ready=null;c.done=true}}var c=e?jQuery:function(j){if(c.done){return j()}if(c.timer){c.ready.push(j)}else{c.ready=[j];c.timer=setInterval(i,13)}};function f(k,j){if(j){for(key in j){if(j.hasOwnProperty(key)){k[key]=j[key]}}}return k}function g(j){switch(h(j)){case"string":j=j.replace(new RegExp('(["\\\\])',"g"),"\\$1");j=j.replace(/^\s?(\d+)%/,"$1pct");return'"'+j+'"';case"array":return"["+b(j,function(m){return g(m)}).join(",")+"]";case"function":return'"function()"';case"object":var k=[];for(var l in j){if(j.hasOwnProperty(l)){k.push('"'+l+'":'+g(j[l]))}}return"{"+k.join(",")+"}"}return String(j).replace(/\s/g," ").replace(/\'/g,'"')}function h(k){if(k===null||k===undefined){return false}var j=typeof k;return(j=="object"&&k.push)?"array":j}if(window.attachEvent){window.attachEvent("onbeforeunload",function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){}})}function b(j,m){var l=[];for(var k in j){if(j.hasOwnProperty(k)){l[k]=m(j[k])}}return l}function a(q,s){var o=f({},q);var r=document.all;var m='<object width="'+o.width+'" height="'+o.height+'"';if(r&&!o.id){o.id="_"+(""+Math.random()).substring(9)}if(o.id){m+=' id="'+o.id+'"'}o.src+=((o.src.indexOf("?")!=-1?"&":"?")+Math.random());if(o.w3c||!r){m+=' data="'+o.src+'" type="application/x-shockwave-flash"'}else{m+=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'}m+=">";if(o.w3c||r){m+='<param name="movie" value="'+o.src+'" />'}o.width=o.height=o.id=o.w3c=o.src=null;for(var j in o){if(o[j]!==null){m+='<param name="'+j+'" value="'+o[j]+'" />'}}var n="";if(s){for(var l in s){if(s[l]!==null){n+=l+"="+(typeof s[l]=="object"?g(s[l]):s[l])+"&"}}n=n.substring(0,n.length-1);m+='<param name="flashvars" value=\''+n+"' />"}m+="</object>";return m}function d(l,o,k){var j=flashembed.getVersion();f(this,{getContainer:function(){return l},getConf:function(){return conf},getVersion:function(){return j},getFlashvars:function(){return k},getApi:function(){return l.firstChild},getHTML:function(){return a(o,k)}});var p=o.version;var q=o.expressInstall;var n=!p||flashembed.isSupported(p);if(n){o.onFail=o.version=o.expressInstall=null;l.innerHTML=a(o,k)}else{if(p&&q&&flashembed.isSupported([6,65])){f(o,{src:q});k={MMredirectURL:location.href,MMplayerType:"PlugIn",MMdoctitle:document.title};l.innerHTML=a(o,k)}else{if(l.innerHTML.replace(/\s/g,"")!==""){}else{l.innerHTML="<h2>Flash version "+p+" or greater is required</h2><h3>"+(j[0]>0?"Your version is "+j:"You have no flash plugin installed")+"</h3>"+(l.tagName=="A"?"<p>Click here to download latest version</p>":"<p>Download latest version from <a href='http://www.adobe.com/go/getflashplayer'>here</a></p>");if(l.tagName=="A"){l.href="http://www.adobe.com/go/getflashplayer"}}}}if(!n&&o.onFail){var m=o.onFail.call(this);if(typeof m=="string"){l.innerHTML=m}}}window.flashembed=function(k,l,j){if(typeof k=="string"){var m=document.getElementById(k);if(m){k=m}else{c(function(){flashembed(k,l,j)});return}}if(!k){return}var n={width:"100%",height:"100%",allowFullScreen:true,allowscriptaccess:"always",quality:"high",version:null,onFail:null,expressInstall:null,w3c:false};if(typeof l=="string"){l={src:l}}f(n,l);return new d(k,n,j)};f(window.flashembed,{getVersion:function(){var l=[0,0];if(navigator.plugins&&typeof navigator.plugins["Shockwave Flash"]=="object"){var k=navigator.plugins["Shockwave Flash"].description;if(typeof k!="undefined"){k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");var m=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);var q=/r/.test(k)?parseInt(k.replace(/^.*r(.*)$/,"$1"),10):0;l=[m,q]}}else{if(window.ActiveXObject){try{var o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(p){try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");l=[6,0];o.AllowScriptAccess="always"}catch(j){if(l[0]==6){return}}try{o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(n){}}if(typeof o=="object"){k=o.GetVariable("$version");if(typeof k!="undefined"){k=k.replace(/^\S+\s+(.*)$/,"$1").split(",");l=[parseInt(k[0],10),parseInt(k[2],10)]}}}}return l},isSupported:function(j){var l=flashembed.getVersion();var k=(l[0]>j[0])||(l[0]==j[0]&&l[1]>=j[1]);return k},domReady:c,asString:g,getHTML:a});if(e){jQuery.prototype.flashembed=function(k,j){return this.each(function(){flashembed(this,k,j)})}}})();$(function(){$('a').click(function(){var $a=$(this);var href=$a.attr('href');if(href.match(/^\/cgi\/powerpoint/)){href=href+".ppt";}
var hrefArray=href.split('.');var extension=hrefArray[hrefArray.length-1];var fileTypes=['doc','zip','xls','ppt','xml','pdf','mp3'];if((href.match(/^http/))&&(!href.match(document.domain))){var category='outgoing';var event='click';var label=href;pageTracker._trackEvent(category,event,href);}
if(href.match(/^mailto/)){var category='mailto';var event='click';var label=href;pageTracker._trackEvent(category,event,href);}
if($.inArray(extension,fileTypes)!=-1){pageTracker._trackEvent('download',extension,href);}});})
function populateElement(selector,defvalue){if($.trim($(selector).val())==""){$(selector).val(defvalue);}
$(selector).focus(function(){if($(selector).val()==defvalue){$(selector).val("");}});$(selector).blur(function(){if($.trim(jQuery(selector).val())==""){$(selector).val(defvalue);}});};function popUp(){$('A[rel="external"]').click(function(){window.open($(this).attr('href'),'','status=yes,scrollbars=yes,resizable=yes,width=700,height=550');return false;});}
function mediaplayer(media,player,autoplay){if(media=="video"){mtrack="Video";mdisplay=true;}
else{mtrack="Audio";mdisplay=false;}
if(!player){player="#player";}
if(autoplay){mauto=true;}
else{mauto=false;}
$(player).flowplayer("http://group.bmj.com/media/flowplayer/flowplayer-3.1.0.swf",{plugins:{controls:{fullscreen:mdisplay}},clip:{autoPlay:mauto,onBegin:function(clip){pageTracker._trackEvent("Video","Start",clip.url);},onResume:function(clip){pageTracker._trackEvent("Video","Resume",clip.url);},onPause:function(clip){pageTracker._trackEvent("Video","Pause",clip.url,parseInt(this.getTime()));},onStop:function(clip){pageTracker._trackEvent("Video","Stop",clip.url,parseInt(this.getTime()));},onFinish:function(clip){pageTracker._trackEvent("Video","Finish",clip.url);}}});}
function widget(options){var default_args={'url':"http://www.bmj.com/rss/recent.xml",'section':"none",'source':"no",'category':"all",'track':"widget_bmjblogs",'title':"Latest from BMJ",'subject':"all",'style':"bmj",'desc_len':"0",'display_source':"yes",'display_content':"no",'widget':"feeds-widget1",'jurl':"http://group.bmj.com/feed2json/index.php",'target':"_self",'podcastlogo':"http://resources.bmj.com/repository/images/flowplayer-generic-image.jpg",'expandplayer':"no",'num_items':"5"}
this.default_args=default_args;this.options=options;for(var index in this.default_args){if(typeof this.options[index]=="undefined")
this.options[index]=this.default_args[index];}
$.ajax({url:this.options['jurl'],data:"url="+this.options['url']+"&desc_len="+this.options['desc_len']+"&subject="+this.options['subject']+"&category="+this.options['category']+"&widget_title="+this.options['widget_title']+"&style="+this.options['style']+"&source="+this.options['source']+"&display_content="+this.options['display_content']+"&display_source="+this.options['display_source']+"&track="+this.options['track']+"&target="+this.options['target']+"&num_items="+this.options['num_items']+"&section="+this.options['section']+"&enclink="+this.options['enclink']+"&enclength="+this.options['enclength']+"&encltype="+this.options['encltype']+"&podcastlogo="+this.options['podcastlogo']+"&expandplayer="+this.options['expandplayer']+"&widget="+this.options['widget']+"&callback=bmjcallback1",cache:true,dataType:"script",success:bmjcallback1=function(data){if(data){if(data.feedhead){$('div#'+data.feedhead[0].widget).empty();$('div#'+data.feedhead[0].widget).append('<h2>'+data.feedhead[0].widget_title+'</h2>');$('div#'+data.feedhead[0].widget).addClass(data.feedhead[0].style);$('div#'+data.feedhead[0].widget).append('<ul class="StandardBullet">');$.each(data.items,function(i,item){if(i<data.feedhead[0].num_items){feed_html='<li class="rss-item">';if(item.source=="no"){if(item.section.length>0){feed_html+=' '+'<span class="sect1">'+item.section+':'+'</span>'+' ';}}
else{if((item.source!=undefined)&&(data.feedhead[0].display_source!="none")){feed_html+=' '+'<span class="sect1">'+item.source+':'+'</span>'+' ';}}
feed_html+=' '+'<span class="title1"><a href="'+item.link+'" target="'+data.feedhead[0].target+'">'+item.title+'<\/a>'+'</span>'+' ';if(item.date){feed_html+='<span class="date">'+"("+item.date+")"+'</span>';}
if(item.author){feed_html+='<span class="author">'+"("+item.author+")"+'</span>';}
if(data.feedhead[0].desc_len=="all"){feed_html+='<div class="feedDesc">'+item.description+'</div>';}
else
if(item.description!=""&&data.feedhead[0].desc_len>50){trunc=item.description.substring(0,data.feedhead[0].desc_len);trunc=trunc.replace(/\w+$/,'');feed_html+='<div class="feedDesc">'+trunc+'...</div>';if(data.feedhead[0].display_content=="yes"){ulink=item.link.match(/[^\?]+/);feed_html+='<div class="feedDesc" style="display: none">'+item.content+'<div class="postmetadata alt"><div class="category">Posted in <a rel="category tag" title="View all posts in Students" href="http://blogs.bmj.com/bmj/category/students/">Students</a>.</div><div class="email"><div class="button"><a rel="nofollow" title="Email This Post" href="'+ulink+'email/">Email This Post</a></div></div><div class="response"><div class="button"><a href="'+ulink+'#comments" class="response">Comments</a></div></div><div class="respond"><div class="button"><a href="'+ulink+'#respond" class="respond">Respond</a><p>&nbsp;</p></div></div></div></div><br/>';$(".title1 a").live("click",function(){$(this).parent().siblings('.feedDesc').toggle("slow");return false;});}}
if(item.encltype=="audio/mpeg"){feed_html+='<a class="player"  href="'+item.enclink+'"  style="display:block;width:155px;height:20px; margin-bottom:8px;"><img src="http://group.bmj.com/media/movies/Masterclasses/play_small.png" alt="BMJ podcast"/></a>';}
feed_html+='</li>';$('div#'+data.feedhead[0].widget+' ul').append(feed_html);}});$('div#'+data.feedhead[0].widget+' ul a.player').live("click",function(){flowplayer(this,"http://group.bmj.com/media/flowplayer/flowplayer-3.1.0.swf",{plugins:{controls:{play:true,volume:false,mute:false,time:true,stop:false,playlist:false,scrubber:true,fullscreen:true,bufferColor:'#006990',progressColor:'#009AF6',buttonColor:'#009AF6',buttonOverColor:'#FF00FF',tooltipColor:'#009AF6',height:20}},playlist:[{url:data.feedhead[0].podcastlogo,scaling:'orig'},{url:$(this).attr("href"),autoPlay:true,autoBuffering:false}],clip:{autoPlay:true,onBegin:function(clip){pageTracker._trackEvent("Audio","Start",clip.url);},onResume:function(clip){pageTracker._trackEvent("Audio","Resume",clip.url);},onPause:function(clip){pageTracker._trackEvent("Audio","Pause",clip.url,parseInt(this.getTime()));},onStop:function(clip){pageTracker._trackEvent("Audio","Stop",clip.url,parseInt(this.getTime()));},onFinish:function(clip){pageTracker._trackEvent("Audio","Finish",clip.url);}}});if(data.feedhead[0].expandplayer=="yes"){$(this).addClass("expandplayer");$("#"+data.feedhead[0].widget+" ul li a").click(function(){$(this).parents("li").siblings("li").children("a").removeClass("expandplayer");$(this).addClass("expandplayer");});}
$f(this).load();return false});}}}});}
function tabbedwidget(options){var default_args={'url':"http://www.bmj.com/rss/recent.xml",'section':"none",'source':"no",'category':"all",'track':"widget_bmjblogs",'title':"Latest from BMJ",'subject':"all",'style':"bmj",'desc_len':"0",'display_source':"yes",'widget':"tabbed-widget",'jurl':"http://group.bmj.com/feed2json/index.php",'target':"_self",'num_items':"5"}
this.default_args=default_args;this.options=options;for(var index in this.default_args){if(typeof this.options[index]=="undefined")
this.options[index]=this.default_args[index];}
$.ajax({url:this.options['jurl'],data:"url="+this.options['url']+"&desc_len="+this.options['desc_len']+"&subject="+this.options['subject']+"&category="+this.options['category']+"&widget_title="+this.options['widget_title']+"&style="+this.options['style']+"&source="+this.options['source']+"&display_source="+this.options['display_source']+"&track="+this.options['track']+"&target="+this.options['target']+"&num_items="+this.options['num_items']+"&section="+this.options['section']+"&enclink="+this.options['enclink']+"&enclength="+this.options['enclength']+"&encltype="+this.options['encltype']+"&widget="+this.options['widget']+"&callback=bmjcallback3",cache:true,dataType:"script",success:bmjcallback3=function(data){if(data.feedhead!=null){if(options.wbox==1){$('div#tabbed-widget').addClass(data.feedhead[0].style);$('div#'+data.feedhead[0].widget).empty();$('div#'+data.feedhead[0].widget).append('<ul class="StandardBullet">');$.each(data.items,function(i,item){if(i<data.feedhead[0].num_items){feed_html='<li class="rss-item">';if(item.source=="none"||item.source=="undefined"||item.source=="none"||item.source=="no"){if(item.section.length>0){feed_html+=' '+'<span class="sect1">'+item.section+':'+'</span>'+' ';}}
else{if((item.source!=undefined)&&(data.feedhead[0].display_source!="none")){feed_html+=' '+'<span class="sect1">'+item.source+':'+'</span>'+' ';}}
feed_html+=' '+'<span class="title1"><a href="'+item.link+'" target="'+data.feedhead[0].target+'">'+item.title+'<\/a>'+'</span>'+' ';if(item.date){feed_html+='<span class="date">'+"("+item.date+")"+'</span>';}
if(item.author){feed_html+='<span class="author">'+"("+item.author+")"+'</span>';}
if(data.feedhead[0].desc_len=="all"){feed_html+='<div class="feedDesc">'+item.description+'</div>';}
else if(item.description!=""&&data.feedhead[0].desc_len>50){trunc=item.description.substring(0,data.feedhead[0].desc_len);trunc=trunc.replace(/\w+$/,'');feed_html+='<div class="feedDesc">'+trunc+'...</div>';}
if(item.encltype=="audio/mpeg"){feed_html+='<br/><a class="player"  href="'+item.enclink+'"  style="display:block;width:155px;height:26px;"><img src="http://group.bmj.com/media/movies/Masterclasses/play_small.png" alt="BMJ podcast"/></a>';}
feed_html+='</li>';$('div#'+data.feedhead[0].widget+' ul.StandardBullet').append(feed_html);}});}
else{$('div#'+data.feedhead[0].widget).empty();$('div#'+data.feedhead[0].widget).addClass(data.feedhead[0].style);$('div#'+data.feedhead[0].widget).append('<div class="latestbox1">');$('div#'+data.feedhead[0].widget).append('<div class="latestbox2">');$.each(data.items,function(i,item){if(i<data.feedhead[0].num_items){feed_html='<div class="feeditem">';if(item.source=="none"||item.source=="undefined"||item.source=="none"||item.source=="no"){if(item.section.length>0){feed_html+=' '+'<span class="sect1">'+item.section+':'+'</span>'+' ';}}
else{if((item.source!=undefined)&&(data.feedhead[0].display_source!="none")){feed_html+=' '+'<span class="sect1">'+item.source+':'+'</span>'+' ';}}
feed_html+=' '+'<span class="title1"><a href="'+item.link+'" target="'+data.feedhead[0].target+'">'+item.title+'<\/a>'+'</span>'+' ';if(item.date){feed_html+='<span class="date">'+"("+item.date+")"+'</span>';}
if(item.author){feed_html+='<span class="author">'+"("+item.author+")"+'</span>';}
if(data.feedhead[0].desc_len=="all"){feed_html+='<div class="feedDesc">'+item.description+'</div>';}
else if(item.description!=""&&data.feedhead[0].desc_len>50){trunc=item.description.substring(0,data.feedhead[0].desc_len);trunc=trunc.replace(/\w+$/,'');feed_html+='<div class="feedDesc">'+trunc+'...</div>';}
if(item.encltype=="audio/mpeg"){feed_html+='<br/><a class="player"  href="'+item.enclink+'"><img src="http://group.bmj.com/media/movies/Masterclasses/play_small.png" alt="BMJ podcast"/></a>';}
feed_html+='</div>';if(i<10){$('div#'+data.feedhead[0].widget+' div.latestbox1').append(feed_html);}
else{$('div#'+data.feedhead[0].widget+' div.latestbox2').append(feed_html);}}});}
$('div#'+data.feedhead[0].widget+' ul a.player').live("click",function(){flowplayer(this,"http://group.bmj.com/media/flowplayer/flowplayer-3.1.0.swf",{plugins:{controls:{play:true,volume:false,mute:false,time:true,stop:false,playlist:false,scrubber:true,bottom:4,fullscreen:false,width:155,height:60}},clip:{autoPlay:true,onStart:function(clip){pageTracker._trackEvent("Audio","Play",clip.url);},onPause:function(clip){pageTracker._trackEvent("Audio","Pause",clip.url,parseInt(this.getTime()));},onStop:function(clip){pageTracker._trackEvent("Audio","Stop",clip.url,parseInt(this.getTime()));},onFinish:function(clip){pageTracker._trackEvent("Audio","Finish",clip.url);}}});$f(this).load();return false});}}});}
$(function(){hostname=window.location.hostname;var vidhref=$("#videoplayer").attr('href');$("#videoplayer").attr('href','http://'+hostname+vidhref);var audiohref=$("#audioplayer").attr('href');$("#audioplayer").attr('href','http://'+hostname+audiohref);mediaplayer("video","#videoplayer");mediaplayer("audio","#audioplayer");})
$(document).ready(function(){alertOptions();});function initRetakeModulePopUp(){$('body').append('<div id="overlay"></div>');var msg=$('div#retake-alert').html();var moduleId=$('input[name="moduleId"]').val();var page=$('input[name="page"]').val();var locale=$('input[name="locale"]').val();var action=$('input[name="action"]').val();var flowId=$('input[name="_flowId"]').val();var sessionTimeoutInMin=$('input[name="sessionTimeoutInMin"]').val();var status=$('input[name="status"]').val();var resType=$('input[name="resType"]').val();var resTypeId=$('input[name="resTypeId"]').val();var cModuleId=$('input[name="cModuleId"]').val();var shouldStartAtQuestionSection=$('input[name="shouldStartAtQuestionSection"]').val();var queryString='?_flowId='+flowId+'&moduleId='+moduleId
+'&page=0'+'&isFrmRA=true&status='+status+'&locale='
+locale+'&sessionTimeoutInMin='+sessionTimeoutInMin+'&shouldStartAtQuestionSection='+shouldStartAtQuestionSection;var url=pathname+'modules/flow/'+flowId+'.html';if(resType!=''){queryString=queryString+'&resType='+resType;}
if(resTypeId!=''){queryString=queryString+'&resTypeId='+resTypeId;}
var confirmText=$('span#confirm').text();$.fn.alerts.defaults.okBtn=$('span#retake').text();$.fn.alerts.defaults.cancelBtn=$('span#review').text();$.fn.bmjConfirm(msg,"'"+confirmText+"'",function(value){if(value){$('div#redirect').show();url=url+queryString+'&action=retake';var deleteUrl=pathname+'rest/module/retake-alert/delete';$.ajax({type:"GET",url:deleteUrl,data:{"cModuleId":cModuleId},success:function(data){window.location=url;}});}else{$('div#redirect').show();url=pathname+'modules/flow/review/'+flowId+'.html'
+queryString+'&action=review';window.location=url;}});}
function alertOptions(){$("button.expired-resume").on('click',function(){_expiredResumeAlert();return false;});$("button.expired-resume-submit1").on('click',function(){_expiredResumeAlert();return false;});$("button.expired-resume-submit").on('click',function(){_expiredResumeAlert();return false;});$("button.expired-resume-next").on('click',function(){_expiredResumeAlert();return false;});$("button.expired-resume-previous").on('click',function(){_expiredResumeAlert();return false;});$("button.expired-retake").on('click',function(){_expiredRetakeAlert();return false;});$("button.expired-retake-submit1").on('click',function(){_expiredRetakeAlert();return false;});$("button.expired-retake-submit").on('click',function(){_expiredRetakeAlert();return false;});$("input.expired-retake-next").on('click',function(){_expiredRetakeAlert();return false;});$("input.expired-retake-previous").on('click',function(){_expiredRetakeAlert();return false;});$("button.expired-retake-next").on('click',function(){_expiredRetakeAlert();return false;});$("button.expired-retake-previous").on('click',function(){_expiredRetakeAlert();return false;});$("button.expired-not-started").on('click',function(){_expiredNotStartedAlert();return false;});$("button.expired-not-started-submit1").on('click',function(){_expiredNotStartedAlert();return false;});$("button.expired-not-started-submit").on('click',function(){_expiredNotStartedAlert();return false;});$("input.expired-not-started-submit1").on('click',function(){_expiredNotStartedAlert();return false;});$("input.expired-not-started-submit").on('click',function(){_expiredNotStartedAlert();return false;});$("button.expired-not-started-next").on('click',function(){_expiredNotStartedAlert();return false;});$("button.expired-not-started-previous").on('click',function(){_expiredNotStartedAlert();return false;});$("input.expired-not-started-next").on('click',function(){_expiredNotStartedAlert();return false;});$("input.expired-not-started-previous").on('click',function(){_expiredNotStartedAlert();return false;});}
function closeConfirmation(){$('div#alert_holder').remove();$('div#overlay').remove();$('div#popup_overlay').remove();}
function _expiredResumeAlert(){var moduleId=$('input[name="moduleId"]').val();var page=$('input[name="page"]').val();var locale=$('input[name="locale"]').val();var moduleLocale=$('input[name="moduleLocale"]').val();var flowId=$('input[name="flowId"]').val();var sessionTimeoutInMin=$('input[name="sessionTimeoutInMin"]').val();var action=$('input[name="action"]').val();var status=$('input[name="status"]').val();var resType=$('input[name="resType"]').val();var resTypeId=$('input[name="resTypeId"]').val();var msg=$('span#resume-msg').html();var lastSavedPage=$('span#lastSavedPage').text();var queryString='_flowId='+flowId+'&moduleId='+moduleId
+'&action=resume'+'&status='+status+'&sessionTimeoutInMin='
+sessionTimeoutInMin;if(resType!=undefined&&resType!=''){queryString=queryString+'&resType='+resType;}
if(resTypeId!=undefined&&resType!=''){queryString=queryString+'&resTypeId='+resTypeId;}
$('body').append('<div id="overlay"></div>');var confirmText=$('span#confirm').text();if(moduleLocale!=''&&moduleLocale!=locale){var localMsg=$('span#resume-locale-msg').html();$.fn.alerts.defaults.okBtn=$('span#resume-btn-continue-value').text();$.fn.alerts.defaults.cancelBtn=$('span#btn-cancel-value').text();$.fn.bmjConfirm(localMsg,"'"+confirmText+"'",function(value2){if(value2){var alertMsg=$('span#resume-alert-msg').html();if(lastSavedPage<page){alertMsg=$('span#resume-notreached-msg').html();}
$.fn.alerts.defaults.okBtn=$('span#resume-btn-current-value').text();$.fn.alerts.defaults.cancelBtn=$('span#resume-btn-value').text();$.fn.bmjConfirm(alertMsg,"'"+confirmText+"'",function(value){if(value){var url=pathname
+'modules/flow/expired/resume.html?page='
+page+'&'+queryString+'&locale='
+moduleLocale;window.location=url;}else{var url=pathname+'modules/flow/'+flowId
+'.html?'+queryString+'&locale='
+moduleLocale;window.location=url;}});}});}else{$.fn.alerts.defaults.okBtn=$('span#resume-btn-current-value').text();$.fn.alerts.defaults.cancelBtn=$('span#resume-btn-value').text();if(lastSavedPage<page){msg=$('span#resume-notreached-msg').html();}
$.fn.bmjConfirm(msg,"'"+confirmText+"'",function(value){if(value){var url=pathname+'modules/flow/expired/resume.html?page='
+page+'&'+queryString+'&locale='+locale;window.location=url;}else{var url=pathname+'modules/flow/'+flowId+'.html?'
+queryString+'&locale='+locale;window.location=url;}});}}
function _expiredRetakeAlert(){var moduleId=$('input[name="moduleId"]').val();var page=$('input[name="page"]').val();var locale=$('input[name="locale"]').val();var flowId=$('input[name="flowId"]').val();var sessionTimeoutInMin=$('input[name="sessionTimeoutInMin"]').val();var action=$('input[name="action"]').val();var status=$('input[name="status"]').val();var resType=$('input[name="resType"]').val();var resTypeId=$('input[name="resTypeId"]').val();var msg=$('span#retake-msg').html();var queryString='?_flowId='+flowId+'&page=0&moduleId='+moduleId
+'&isFrmRA=true&status='+status+'&locale='+locale
+'&sessionTimeoutInMin='+sessionTimeoutInMin;if(resType!=undefined&&resType!=''){queryString=queryString+'&resType='+resType;}
if(resTypeId!=undefined&&resType!=''){queryString=queryString+'&resTypeId='+resTypeId;}
$('body').append('<div id="overlay"></div>');$.fn.alerts.defaults.okBtn=$('span#retake-btn-retake-value').text();$.fn.alerts.defaults.cancelBtn=$('span#retake-btn-review-value').text();var confirmText=$('span#confirm').text();$.fn.bmjConfirm(msg,"'"+confirmText+"'",function(value){if(value){var url=pathname+'modules/flow/'+flowId+'.html'
+queryString+'&action=retake';window.location=url;}else{var url=pathname+'modules/flow/review/'+flowId+'.html'
+queryString+'&action=review';window.location=url;}});}
function _expiredNotStartedAlert(){var moduleId=$('input[name="moduleId"]').val();var page=$('input[name="page"]').val();var locale=$('input[name="locale"]').val();var flowId=$('input[name="flowId"]').val();var sessionTimeoutInMin=$('input[name="sessionTimeoutInMin"]').val();var action=$('input[name="action"]').val();var status=$('input[name="status"]').val();var resType=$('input[name="resType"]').val();var resTypeId=$('input[name="resTypeId"]').val();var msg=$('span#notstarted-msg').html();var queryString='?_flowId='+flowId+'&page=0&moduleId='+moduleId
+'&status='+status+'&locale='+locale
+'&sessionTimeoutInMin='+sessionTimeoutInMin;if(resType!=undefined&&resType!=''){queryString=queryString+'&resType='+resType;}
if(resTypeId!=undefined&&resType!=''){queryString=queryString+'&resTypeId='+resTypeId;}
$('body').append('<div id="overlay"></div>');$.fn.alerts.defaults.okBtn=$('span#start-btn-value').text();$.fn.alerts.defaults.cancelBtn=$('span#btn-cancel-value').text();var confirmText=$('span#confirm').text();$.fn.bmjConfirm(msg,"'"+confirmText+"'",function(value){if(value){var url=pathname+'modules/flow/'+flowId+'.html'
+queryString+"&action=start";window.location=url;}});};(function($){var tmp,loading,overlay,wrap,outer,content,close,title,nav_left,nav_right,selectedIndex=0,selectedOpts={},selectedArray=[],currentIndex=0,currentOpts={},currentArray=[],ajaxLoader=null,imgPreloader=new Image(),imgRegExp=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,swfRegExp=/[^\.]\.(swf)\s*$/i,loadingTimer,loadingFrame=1,titleHeight=0,titleStr='',start_pos,final_pos,busy=false,fx=$.extend($('<div/>')[0],{prop:0}),isIE6=navigator.userAgent.match(/msie [6]/i)&&!window.XMLHttpRequest,_abort=function(){loading.hide();imgPreloader.onerror=imgPreloader.onload=null;if(ajaxLoader){ajaxLoader.abort();}
tmp.empty();},_error=function(){if(false===selectedOpts.onError(selectedArray,selectedIndex,selectedOpts)){loading.hide();busy=false;return;}
selectedOpts.titleShow=false;selectedOpts.width='auto';selectedOpts.height='auto';tmp.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline();},_start=function(){var obj=selectedArray[selectedIndex],href,type,title,str,emb,ret;_abort();selectedOpts=$.extend({},$.fn.fancybox.defaults,(typeof $(obj).data('fancybox')=='undefined'?selectedOpts:$(obj).data('fancybox')));ret=selectedOpts.onStart(selectedArray,selectedIndex,selectedOpts);if(ret===false){busy=false;return;}else if(typeof ret=='object'){selectedOpts=$.extend(selectedOpts,ret);}
title=selectedOpts.title||(obj.nodeName?$(obj).attr('title'):obj.title)||'';if(obj.nodeName&&!selectedOpts.orig){selectedOpts.orig=$(obj).children("img:first").length?$(obj).children("img:first"):$(obj);}
if(title===''&&selectedOpts.orig&&selectedOpts.titleFromAlt){title=selectedOpts.orig.attr('alt');}
href=selectedOpts.href||(obj.nodeName?$(obj).attr('href'):obj.href)||null;if((/^(?:javascript)/i).test(href)||href=='#'){href=null;}
if(selectedOpts.type){type=selectedOpts.type;if(!href){href=selectedOpts.content;}}else if(selectedOpts.content){type='html';}else if(href){if(href.match(imgRegExp)){type='image';}else if(href.match(swfRegExp)){type='swf';}else if($(obj).hasClass("iframe")){type='iframe';}else if(href.indexOf("#")===0){type='inline';}else{type='ajax';}}
if(!type){_error();return;}
if(type=='inline'){obj=href.substr(href.indexOf("#"));type=$(obj).length>0?'inline':'ajax';}
selectedOpts.type=type;selectedOpts.href=href;selectedOpts.title=title;if(selectedOpts.autoDimensions){if(selectedOpts.type=='html'||selectedOpts.type=='inline'||selectedOpts.type=='ajax'){selectedOpts.width='auto';selectedOpts.height='auto';}else{selectedOpts.autoDimensions=false;}}
if(selectedOpts.modal){selectedOpts.overlayShow=true;selectedOpts.hideOnOverlayClick=false;selectedOpts.hideOnContentClick=false;selectedOpts.enableEscapeButton=false;selectedOpts.showCloseButton=false;}
selectedOpts.padding=parseInt(selectedOpts.padding,10);selectedOpts.margin=parseInt(selectedOpts.margin,10);tmp.css('padding',(selectedOpts.padding+selectedOpts.margin));$('.fancybox-inline-tmp').unbind('fancybox-cancel').bind('fancybox-change',function(){$(this).replaceWith(content.children());});switch(type){case'html':tmp.html(selectedOpts.content);_process_inline();break;case'inline':if($(obj).parent().is('#fancybox-content')===true){busy=false;return;}
$('<div class="fancybox-inline-tmp" />').hide().insertBefore($(obj)).bind('fancybox-cleanup',function(){$(this).replaceWith(content.children());}).bind('fancybox-cancel',function(){$(this).replaceWith(tmp.children());});$(obj).appendTo(tmp);_process_inline();break;case'image':busy=false;$.fancybox.showActivity();imgPreloader=new Image();imgPreloader.onerror=function(){_error();};imgPreloader.onload=function(){busy=true;imgPreloader.onerror=imgPreloader.onload=null;_process_image();};imgPreloader.src=href;break;case'swf':selectedOpts.scrolling='no';str='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"><param name="movie" value="'+href+'"></param>';emb='';$.each(selectedOpts.swf,function(name,val){str+='<param name="'+name+'" value="'+val+'"></param>';emb+=' '+name+'="'+val+'"';});str+='<embed src="'+href+'" type="application/x-shockwave-flash" width="'+selectedOpts.width+'" height="'+selectedOpts.height+'"'+emb+'></embed></object>';tmp.html(str);_process_inline();break;case'ajax':busy=false;$.fancybox.showActivity();selectedOpts.ajax.win=selectedOpts.ajax.success;ajaxLoader=$.ajax($.extend({},selectedOpts.ajax,{url:href,data:selectedOpts.ajax.data||{},error:function(XMLHttpRequest,textStatus,errorThrown){if(XMLHttpRequest.status>0){_error();}},success:function(data,textStatus,XMLHttpRequest){var o=typeof XMLHttpRequest=='object'?XMLHttpRequest:ajaxLoader;if(o.status==200){if(typeof selectedOpts.ajax.win=='function'){ret=selectedOpts.ajax.win(href,data,textStatus,XMLHttpRequest);if(ret===false){loading.hide();return;}else if(typeof ret=='string'||typeof ret=='object'){data=ret;}}
tmp.html(data);_process_inline();}}}));break;case'iframe':_show();break;}},_process_inline=function(){var
w=selectedOpts.width,h=selectedOpts.height;if(w.toString().indexOf('%')>-1){w=parseInt(($(window).width()-(selectedOpts.margin*2))*parseFloat(w)/100,10)+'px';}else{w=w=='auto'?'auto':w+'px';}
if(h.toString().indexOf('%')>-1){h=parseInt(($(window).height()-(selectedOpts.margin*2))*parseFloat(h)/100,10)+'px';}else{h=h=='auto'?'auto':h+'px';}
tmp.wrapInner('<div style="width:'+w+';height:'+h+';overflow: '+(selectedOpts.scrolling=='auto'?'auto':(selectedOpts.scrolling=='yes'?'scroll':'hidden'))+';position:relative;"></div>');selectedOpts.width=tmp.width();selectedOpts.height=tmp.height();_show();},_process_image=function(){selectedOpts.width=imgPreloader.width;selectedOpts.height=imgPreloader.height;$("<img />").attr({'id':'fancybox-img','src':imgPreloader.src,'alt':selectedOpts.title}).appendTo(tmp);_show();},_show=function(){var pos,equal;loading.hide();if(wrap.is(":visible")&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){$.event.trigger('fancybox-cancel');busy=false;return;}
busy=true;$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');if(wrap.is(":visible")&&currentOpts.titlePosition!=='outside'){wrap.css('height',wrap.height());}
currentArray=selectedArray;currentIndex=selectedIndex;currentOpts=selectedOpts;if(currentOpts.overlayShow){overlay.css({'background-color':currentOpts.overlayColor,'opacity':currentOpts.overlayOpacity,'cursor':currentOpts.hideOnOverlayClick?'pointer':'auto','height':$(document).height()});if(!overlay.is(':visible')){if(isIE6){$('select:not(#fancybox-tmp select)').filter(function(){return this.style.visibility!=='hidden';}).css({'visibility':'hidden'}).one('fancybox-cleanup',function(){this.style.visibility='inherit';});}
overlay.show();}}else{overlay.hide();}
final_pos=_get_zoom_to();_process_title();if(wrap.is(":visible")){$(close.add(nav_left).add(nav_right)).hide();pos=wrap.position(),start_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};equal=(start_pos.width==final_pos.width&&start_pos.height==final_pos.height);content.fadeTo(currentOpts.changeFade,0.3,function(){var finish_resizing=function(){content.html(tmp.contents()).fadeTo(currentOpts.changeFade,1,_finish);};$.event.trigger('fancybox-change');content.empty().removeAttr('filter').css({'border-width':currentOpts.padding,'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2});if(equal){finish_resizing();}else{fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.changeSpeed,easing:currentOpts.easingChange,step:_draw,complete:finish_resizing});}});return;}
wrap.removeAttr("style");content.css('border-width',currentOpts.padding);if(currentOpts.transitionIn=='elastic'){start_pos=_get_zoom_from();content.html(tmp.contents());wrap.show();if(currentOpts.opacity){final_pos.opacity=0;}
fx.prop=0;$(fx).animate({prop:1},{duration:currentOpts.speedIn,easing:currentOpts.easingIn,step:_draw,complete:_finish});return;}
if(currentOpts.titlePosition=='inside'&&titleHeight>0){title.show();}
content.css({'width':final_pos.width-currentOpts.padding*2,'height':selectedOpts.autoDimensions?'auto':final_pos.height-titleHeight-currentOpts.padding*2}).html(tmp.contents());wrap.css(final_pos).fadeIn(currentOpts.transitionIn=='none'?0:currentOpts.speedIn,_finish);},_format_title=function(title){if(title&&title.length){if(currentOpts.titlePosition=='float'){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+title+'</td><td id="fancybox-title-float-right"></td></tr></table>';}
return'<div id="fancybox-title-'+currentOpts.titlePosition+'">'+title+'</div>';}
return false;},_process_title=function(){titleStr=currentOpts.title||'';titleHeight=0;title.empty().removeAttr('style').removeClass();if(currentOpts.titleShow===false){title.hide();return;}
titleStr=$.isFunction(currentOpts.titleFormat)?currentOpts.titleFormat(titleStr,currentArray,currentIndex,currentOpts):_format_title(titleStr);if(!titleStr||titleStr===''){title.hide();return;}
title.addClass('fancybox-title-'+currentOpts.titlePosition).html(titleStr).appendTo('body').show();switch(currentOpts.titlePosition){case'inside':title.css({'width':final_pos.width-(currentOpts.padding*2),'marginLeft':currentOpts.padding,'marginRight':currentOpts.padding});titleHeight=title.outerHeight(true);title.appendTo(outer);final_pos.height+=titleHeight;break;case'over':title.css({'marginLeft':currentOpts.padding,'width':final_pos.width-(currentOpts.padding*2),'bottom':currentOpts.padding}).appendTo(outer);break;case'float':title.css('left',parseInt((title.width()-final_pos.width-40)/2,10)*-1).appendTo(wrap);break;default:title.css({'width':final_pos.width-(currentOpts.padding*2),'paddingLeft':currentOpts.padding,'paddingRight':currentOpts.padding}).appendTo(wrap);break;}
title.hide();},_set_navigation=function(){if(currentOpts.enableEscapeButton||currentOpts.enableKeyboardNav){$(document).bind('keydown.fb',function(e){if(e.keyCode==27&&currentOpts.enableEscapeButton){e.preventDefault();$.fancybox.close();}else if((e.keyCode==37||e.keyCode==39)&&currentOpts.enableKeyboardNav&&e.target.tagName!=='INPUT'&&e.target.tagName!=='TEXTAREA'&&e.target.tagName!=='SELECT'){e.preventDefault();$.fancybox[e.keyCode==37?'prev':'next']();}});}
if(!currentOpts.showNavArrows){nav_left.hide();nav_right.hide();return;}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!==0){nav_left.show();}
if((currentOpts.cyclic&&currentArray.length>1)||currentIndex!=(currentArray.length-1)){nav_right.show();}},_finish=function(){if(!$.support.opacity){content.get(0).style.removeAttribute('filter');wrap.get(0).style.removeAttribute('filter');}
if(selectedOpts.autoDimensions){content.css('height','auto');}
wrap.css('height','auto');if(titleStr&&titleStr.length){title.show();}
if(currentOpts.showCloseButton){close.show();}
_set_navigation();if(currentOpts.hideOnContentClick){content.bind('click',$.fancybox.close);}
if(currentOpts.hideOnOverlayClick){overlay.bind('click',$.fancybox.close);}
$(window).bind("resize.fb",$.fancybox.resize);if(currentOpts.centerOnScroll){$(window).bind("scroll.fb",$.fancybox.center);}
if(currentOpts.type=='iframe'){$('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+(navigator.userAgent.match(/msie [6]/i)?'allowtransparency="true""':'')+' scrolling="'+selectedOpts.scrolling+'" src="'+currentOpts.href+'"></iframe>').appendTo(content);}
wrap.show();busy=false;$.fancybox.center();currentOpts.onComplete(currentArray,currentIndex,currentOpts);_preload_images();},_preload_images=function(){var href,objNext;if((currentArray.length-1)>currentIndex){href=currentArray[currentIndex+1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}
if(currentIndex>0){href=currentArray[currentIndex-1].href;if(typeof href!=='undefined'&&href.match(imgRegExp)){objNext=new Image();objNext.src=href;}}},_draw=function(pos){var dim={width:parseInt(start_pos.width+(final_pos.width-start_pos.width)*pos,10),height:parseInt(start_pos.height+(final_pos.height-start_pos.height)*pos,10),top:parseInt(start_pos.top+(final_pos.top-start_pos.top)*pos,10),left:parseInt(start_pos.left+(final_pos.left-start_pos.left)*pos,10)};if(typeof final_pos.opacity!=='undefined'){dim.opacity=pos<0.5?0.5:pos;}
wrap.css(dim);content.css({'width':dim.width-currentOpts.padding*2,'height':dim.height-(titleHeight*pos)-currentOpts.padding*2});},_get_viewport=function(){return[$(window).width()-(currentOpts.margin*2),$(window).height()-(currentOpts.margin*2),$(document).scrollLeft()+currentOpts.margin,$(document).scrollTop()+currentOpts.margin];},_get_zoom_to=function(){var view=_get_viewport(),to={},resize=currentOpts.autoScale,double_padding=currentOpts.padding*2,ratio;if(currentOpts.width.toString().indexOf('%')>-1){to.width=parseInt((view[0]*parseFloat(currentOpts.width))/100,10);}else{to.width=currentOpts.width+double_padding;}
if(currentOpts.height.toString().indexOf('%')>-1){to.height=parseInt((view[1]*parseFloat(currentOpts.height))/100,10);}else{to.height=currentOpts.height+double_padding;}
if(resize&&(to.width>view[0]||to.height>view[1])){if(selectedOpts.type=='image'||selectedOpts.type=='swf'){ratio=(currentOpts.width)/(currentOpts.height);if((to.width)>view[0]){to.width=view[0];to.height=parseInt(((to.width-double_padding)/ratio)+double_padding,10);}
if((to.height)>view[1]){to.height=view[1];to.width=parseInt(((to.height-double_padding)*ratio)+double_padding,10);}}else{to.width=Math.min(to.width,view[0]);to.height=Math.min(to.height,view[1]);}}
to.top=parseInt(Math.max(view[3]-20,view[3]+((view[1]-to.height-40)*0.5)),10);to.left=parseInt(Math.max(view[2]-20,view[2]+((view[0]-to.width-40)*0.5)),10);return to;},_get_obj_pos=function(obj){var pos=obj.offset();pos.top+=parseInt(obj.css('paddingTop'),10)||0;pos.left+=parseInt(obj.css('paddingLeft'),10)||0;pos.top+=parseInt(obj.css('border-top-width'),10)||0;pos.left+=parseInt(obj.css('border-left-width'),10)||0;pos.width=obj.width();pos.height=obj.height();return pos;},_get_zoom_from=function(){var orig=selectedOpts.orig?$(selectedOpts.orig):false,from={},pos,view;if(orig&&orig.length){pos=_get_obj_pos(orig);from={width:pos.width+(currentOpts.padding*2),height:pos.height+(currentOpts.padding*2),top:pos.top-currentOpts.padding-20,left:pos.left-currentOpts.padding-20};}else{view=_get_viewport();from={width:currentOpts.padding*2,height:currentOpts.padding*2,top:parseInt(view[3]+view[1]*0.5,10),left:parseInt(view[2]+view[0]*0.5,10)};}
return from;},_animate_loading=function(){if(!loading.is(':visible')){clearInterval(loadingTimer);return;}
$('div',loading).css('top',(loadingFrame*-40)+'px');loadingFrame=(loadingFrame+1)%12;};$.fn.fancybox=function(options){if(!$(this).length){return this;}
$(this).data('fancybox',$.extend({},options,($.metadata?$(this).metadata():{}))).unbind('click.fb').bind('click.fb',function(e){e.preventDefault();if(busy){return;}
busy=true;$(this).blur();selectedArray=[];selectedIndex=0;var rel=$(this).attr('rel')||'';if(!rel||rel==''||rel==='nofollow'){selectedArray.push(this);}else{selectedArray=$("a[rel="+rel+"], area[rel="+rel+"], img[rel="+rel+"]");selectedIndex=selectedArray.index(this);}
_start();return;});return this;};$.fancybox=function(obj){var opts;if(busy){return;}
busy=true;opts=typeof arguments[1]!=='undefined'?arguments[1]:{};selectedArray=[];selectedIndex=parseInt(opts.index,10)||0;if($.isArray(obj)){for(var i=0,j=obj.length;i<j;i++){if(typeof obj[i]=='object'){$(obj[i]).data('fancybox',$.extend({},opts,obj[i]));}else{obj[i]=$({}).data('fancybox',$.extend({content:obj[i]},opts));}}
selectedArray=jQuery.merge(selectedArray,obj);}else{if(typeof obj=='object'){$(obj).data('fancybox',$.extend({},opts,obj));}else{obj=$({}).data('fancybox',$.extend({content:obj},opts));}
selectedArray.push(obj);}
if(selectedIndex>selectedArray.length||selectedIndex<0){selectedIndex=0;}
_start();};$.fancybox.showActivity=function(){clearInterval(loadingTimer);loading.show();loadingTimer=setInterval(_animate_loading,66);};$.fancybox.hideActivity=function(){loading.hide();};$.fancybox.next=function(){return $.fancybox.pos(currentIndex+1);};$.fancybox.prev=function(){return $.fancybox.pos(currentIndex-1);};$.fancybox.pos=function(pos){if(busy){return;}
pos=parseInt(pos);selectedArray=currentArray;if(pos>-1&&pos<currentArray.length){selectedIndex=pos;_start();}else if(currentOpts.cyclic&&currentArray.length>1){selectedIndex=pos>=currentArray.length?0:currentArray.length-1;_start();}
return;};$.fancybox.cancel=function(){if(busy){return;}
busy=true;$.event.trigger('fancybox-cancel');_abort();selectedOpts.onCancel(selectedArray,selectedIndex,selectedOpts);busy=false;};$.fancybox.close=function(){if(busy||wrap.is(':hidden')){return;}
busy=true;if(currentOpts&&false===currentOpts.onCleanup(currentArray,currentIndex,currentOpts)){busy=false;return;}
_abort();$(close.add(nav_left).add(nav_right)).hide();$(content.add(overlay)).unbind();$(window).unbind("resize.fb scroll.fb");$(document).unbind('keydown.fb');content.find('iframe').attr('src',isIE6&&/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank');if(currentOpts.titlePosition!=='inside'){title.empty();}
wrap.stop();function _cleanup(){overlay.fadeOut('fast');title.empty().hide();wrap.hide();$.event.trigger('fancybox-cleanup');content.empty();currentOpts.onClosed(currentArray,currentIndex,currentOpts);currentArray=selectedOpts=[];currentIndex=selectedIndex=0;currentOpts=selectedOpts={};busy=false;}
if(currentOpts.transitionOut=='elastic'){start_pos=_get_zoom_from();var pos=wrap.position();final_pos={top:pos.top,left:pos.left,width:wrap.width(),height:wrap.height()};if(currentOpts.opacity){final_pos.opacity=1;}
title.empty().hide();fx.prop=1;$(fx).animate({prop:0},{duration:currentOpts.speedOut,easing:currentOpts.easingOut,step:_draw,complete:_cleanup});}else{wrap.fadeOut(currentOpts.transitionOut=='none'?0:currentOpts.speedOut,_cleanup);}};$.fancybox.resize=function(){if(overlay.is(':visible')){overlay.css('height',$(document).height());}
$.fancybox.center(true);};$.fancybox.center=function(){var view,align;if(busy){return;}
align=arguments[0]===true?1:0;view=_get_viewport();if(!align&&(wrap.width()>view[0]||wrap.height()>view[1])){return;}
wrap.stop().animate({'top':parseInt(Math.max(view[3]-20,view[3]+((view[1]-content.height()-40)*0.5)-currentOpts.padding)),'left':parseInt(Math.max(view[2]-20,view[2]+((view[0]-content.width()-40)*0.5)-currentOpts.padding))},typeof arguments[0]=='number'?arguments[0]:200);};$.fancybox.init=function(){if($("#fancybox-wrap").length){return;}
$('body').append(tmp=$('<div id="fancybox-tmp"></div>'),loading=$('<div id="fancybox-loading"><div></div></div>'),overlay=$('<div id="fancybox-overlay"></div>'),wrap=$('<div id="fancybox-wrap"></div>'));outer=$('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(wrap);outer.append(content=$('<div id="fancybox-content"></div>'),close=$('<a id="fancybox-close"></a>'),title=$('<div id="fancybox-title"></div>'),nav_left=$('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),nav_right=$('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));close.click($.fancybox.close);loading.click($.fancybox.cancel);nav_left.click(function(e){e.preventDefault();$.fancybox.prev();});nav_right.click(function(e){e.preventDefault();$.fancybox.next();});if($.fn.mousewheel){wrap.bind('mousewheel.fb',function(e,delta){if(busy){e.preventDefault();}else if($(e.target).get(0).clientHeight==0||$(e.target).get(0).scrollHeight===$(e.target).get(0).clientHeight){e.preventDefault();$.fancybox[delta>0?'prev':'next']();}});}
if(!$.support.opacity){wrap.addClass('fancybox-ie');}
if(isIE6){loading.addClass('fancybox-ie6');wrap.addClass('fancybox-ie6');$('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||'')?'javascript:void(false)':'about:blank')+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(outer);}};$.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:'auto',width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:'transparent'},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:'#777',titleShow:true,titlePosition:'float',titleFormat:null,titleFromAlt:false,transitionIn:'fade',transitionOut:'fade',speedIn:300,speedOut:300,changeSpeed:300,changeFade:'fast',easingIn:'swing',easingOut:'swing',showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};$(document).ready(function(){$.fancybox.init();});})(jQuery);if(typeof JSON!=='object'){JSON={};}
(function(){'use strict';function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf();};}
var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());